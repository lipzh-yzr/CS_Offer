

![](https://cdn.jsdelivr.net/gh/rongweihe/ImageHost01/redis0700.png)

哨兵机制，它是实现 Redis 不间断服务的重要保证。具体来说， 主从集群的数据同步，是数据可靠的基础保证；而在主库发生故障时，自动的主从切换是服务不间断的关键支撑。

Redis 的哨兵机制自动完成了以下三大功能，从而实现了主从库的自动切换，可以降低 Redis 集群的运维开销：

- 监控主库运行状态，并判断主库是否客观下线； 
- 在主库客观下线后，选取新主库； 
- 选出新主库后，通知从库和客户端。

为了降低误判率，在实际应用时，哨兵机制通常采用多实例的方式进行部署，多个哨兵实 例通过“少数服从多数”的原则，来判断主库是否客观下线。一般来说，我们可以部署三 个哨兵，如果有两个哨兵认定主库“主观下线”，就可以开始切换过程。当然，如果你希 望进一步提升判断准确率，也可以再适当增加哨兵个数，比如说使用五个哨兵。 

但是，使用多个哨兵实例来降低误判率，其实相当于组成了一个哨兵集群，我们会因此面 临着一些新的挑战，例如

- 哨兵集群中有实例挂了，怎么办，会影响主库状态判断和选主吗？ 
- 哨兵集群多数实例达成共识，判断出主库“客观下线”后，由哪个实例来执行主从切换呢？

